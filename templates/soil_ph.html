{% extends "base.html" %}

{% block content %}
<h2>Soil pH Testing and Recommendations</h2>

<div id="ph-form">
    <h3>Enter your soil pH value:</h3>
    <input type="number" id="ph-value" step="0.1" min="0" max="14" required>
    <button onclick="submitPH()">Submit</button>
</div>

<div id="ph-result" style="display: none;">
    <h3>Your soil pH: <span id="ph-display"></span></h3>
    <p id="ph-recommendation"></p>
</div>

<div id="ph-guide">
    <h3>Soil pH Guide</h3>
    <p>The pH scale ranges from 0 to 14, with 7 being neutral. Most plants prefer a slightly acidic to neutral pH (6.0 to 7.0).</p>
    <ul>
        <li>Below 5.5: Too acidic for most plants</li>
        <li>5.5 - 6.5: Ideal for acid-loving plants (e.g., blueberries, azaleas)</li>
        <li>6.0 - 7.0: Ideal for most garden plants</li>
        <li>7.0 - 7.5: Suitable for many plants, may need slight adjustment</li>
        <li>Above 7.5: Too alkaline for most plants</li>
    </ul>
</div>
{% endblock %}

{% block scripts %}
<script>
function submitPH() {
    const phValue = document.getElementById('ph-value').value;
    fetch('/soil_ph', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
        },
        body: `ph_value=${phValue}`
    })
    .then(response => response.json())
    .then(data => {
        document.getElementById('ph-display').textContent = phValue;
        document.getElementById('ph-recommendation').textContent = data.recommendation;
        document.getElementById('ph-result').style.display = 'block';
    });
}
</script>
{% endblock %}
