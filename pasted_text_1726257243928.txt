~/VictoryGarden$ python
Python 3.11.9 (main, Apr  2 2024, 08:25:04) [GCC 13.3.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> from main import app, db
>>> from models import User
>>> from werkzeug.security import generate_password_hash
>>> 
>>> # Enter the application context
>>> with app.app_context():
...     # Create a new admin user
...     admin = User(
...         username='admin', 
...         email='admin@victorygarden.io', 
...         user_type='admin'
...     )
...     # Set a secure password
...     admin.password = generate_password_hash('your_secure_password', method='sha256')  # Replace with a secure password
...     
...     # Add and commit the admin user to the database
...     db.session.add(admin)
...     db.session.commit()
... 
Traceback (most recent call last):
  File "<stdin>", line 9, in <module>
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/werkzeug/security.py", line 105, in generate_password_hash
    h, actual_method = _hash_internal(method, salt, password)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/werkzeug/security.py", line 70, in _hash_internal
    raise ValueError(f"Invalid hash method '{method}'.")
ValueError: Invalid hash method 'sha256'.
>>> # Re-enter the application context
>>> with app.app_context():
...     # Retrieve the admin user
...     admin = User.query.filter_by(email='admin@victorygarden.io').first()
...     # Set a new secure password
...     admin.password = generate_password_hash('your_new_secure_password', method='sha256')  # Replace with your new password
...     # Commit the changes
...     db.session.commit()
... 
Traceback (most recent call last):
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column user.password_hash does not exist
LINE 1: ...ame AS user_username, "user".email AS user_email, "user".pas...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "<stdin>", line 3, in <module>
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2728, in first
    return self.limit(1)._iter().first()  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column user.password_hash does not exist
LINE 1: ...ame AS user_username, "user".email AS user_email, "user".pas...
                                                             ^

[SQL: SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".password_hash AS user_password_hash, "user".user_type AS user_user_type, "user".subscription_tier AS user_subscription_tier, "user".subscription_start_date AS user_subscription_start_date, "user".subscription_end_date AS user_subscription_end_date, "user".last_payment_date AS user_last_payment_date, "user".mrr AS user_mrr 
FROM "user" 
WHERE "user".email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'email_1': 'admin@victorygarden.io', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
>>> # Re-enter the application context
>>> with app.app_context():
...     # Retrieve the admin user
...     admin = User.query.filter_by(email='admin@victorygarden.io').first()
...     # Set a new secure password
...     admin.password = generate_password_hash('Thestere0bus1@@', method='sha256')  # Replace with your new password
...     # Commit the changes
...     db.session.commit()
... 
Traceback (most recent call last):
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column user.password_hash does not exist
LINE 1: ...ame AS user_username, "user".email AS user_email, "user".pas...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "<stdin>", line 3, in <module>
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2728, in first
    return self.limit(1)._iter().first()  # type: ignore
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column user.password_hash does not exist
LINE 1: ...ame AS user_username, "user".email AS user_email, "user".pas...
                                                             ^

[SQL: SELECT "user".id AS user_id, "user".username AS user_username, "user".email AS user_email, "user".password_hash AS user_password_hash, "user".user_type AS user_user_type, "user".subscription_tier AS user_subscription_tier, "user".subscription_start_date AS user_subscription_start_date, "user".subscription_end_date AS user_subscription_end_date, "user".last_payment_date AS user_last_payment_date, "user".mrr AS user_mrr 
FROM "user" 
WHERE "user".email = %(email_1)s 
 LIMIT %(param_1)s]
[parameters: {'email_1': 'admin@victorygarden.io', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
>>> admin.password = generate_password_hash('Thestere0bus1@@', method='pbkdf2:sha256')
>>> class User(db.Model):
...     id = db.Column(db.Integer, primary_key=True)
...     username = db.Column(db.String(150), unique=True, nullable=False)
...     email = db.Column(db.String(150), unique=True, nullable=False)
...     password_hash = db.Column(db.String(255), nullable=False)  # Ensure this column exists
...     user_type = db.Column(db.String(50))
...     # ... other fields ...
... 
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/flask_sqlalchemy/model.py", line 92, in __init__
    super().__init__(name, bases, d, **kwargs)
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/flask_sqlalchemy/model.py", line 144, in __init__
    super().__init__(name, bases, d, **kwargs)
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/decl_api.py", line 196, in __init__
    _as_declarative(reg, cls, dict_)
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/decl_base.py", line 244, in _as_declarative
    return _MapperConfig.setup_mapping(registry, cls, dict_, None, {})
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/decl_base.py", line 325, in setup_mapping
    return _ClassScanMapperConfig(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/decl_base.py", line 576, in __init__
    self._setup_table(table)
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/orm/decl_base.py", line 1749, in _setup_table
    table_cls(
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/flask_sqlalchemy/model.py", line 171, in __table_cls__
    return sa.Table(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in __new__
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/schema.py", line 427, in __new__
    return cls._new(*args, **kw)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/runner/VictoryGarden/.pythonlibs/lib/python3.11/site-packages/sqlalchemy/sql/schema.py", line 459, in _new
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Table 'user' is already defined for this MetaData instance.  Specify 'extend_existing=True' to redefine options and columns on an existing Table object.
>>> flask db migrate -m "Add password_hash column to User model"
  File "<stdin>", line 1
    flask db migrate -m "Add password_hash column to User model"
          ^^
SyntaxError: invalid syntax
>>> flask db migrate -m "Add password_hash column to User model"
  File "<stdin>", line 1
    flask db migrate -m "Add password_hash column to User model"
          ^^
SyntaxError: invalid syntax
>>> 
~/VictoryGarden$ flask db migrate -m "Add password_hash column to User model"
Error: Could not locate a Flask application. Use the 'flask --app' option, 'FLASK_APP' environment variable, or a 'wsgi.py' or 'app.py' file in the current directory.

Usage: flask [OPTIONS] COMMAND [ARGS]...
Try 'flask --help' for help.

Error: No such command 'db'.
~/VictoryGarden$ 